namespace = scfe_scrambler

country_event = {
    id = scfe_scrambler.100
    title = scfe_shaded_init.1.name
    desc = scfe_scrambler_init.1.desc
    picture = GFX_evt_communication_event
    is_triggered_only = yes
    location = event_target:scfe_scrambler_colony1_planet

    option = {
        name = INTERESTING
        enable_special_project = {
            name = SCFE_SCRAMBLER_PROJECT_INIT
            location = event_target:scfe_scrambler_colony1_planet
            owner = event_target:scfe_scrambler_owner
        }
    }
}
country_event = {
    id = scfe_scrambler.1
    title = scfe_scrambler.1.name
    desc = scfe_scrambler.1.desc
    inline_script = {
        script = events/biogenesis_event_art
        OWNER = this
        REGULAR_PICTURE = GFX_evt_ship_in_orbit_3
        BIOSHIP_PICTURE = GFX_evt_bio_ships_orbiting
    }
    show_sound = event_default
    is_triggered_only = yes
    location = event_target:scrambler_colony1_planet
    event_chain = scfe_scrambler_chain

    immediate = {
        country_event = { id = story.5 days = 30 }
        save_global_event_target_as = scfe_scrambler_owner
        remove_country_flag = scfe_scrambler_possible
        set_global_flag = scfe_scrambler_precursor_started
    }

    option = {
        name = INTERESTING
        begin_event_chain = { event_chain = scfe_scrambler_chain target = this }
        event_target:scfe_scrambler_colony1_planet = {
            create_archaeological_site = scfe_scrambler_colony1_dig
        }
    }
}
country_event = {
    id = scfe_scrambler.2
    is_triggered_only = yes
    hide_window = yes

    immediate = {
        random_system_within_border = {
            limit = { scfe_is_valid_star_system = yes }
            save_event_target_as = scfe_scrambler_spawn_system
        }
        set_spawn_system_batch = begin
        event_target:scfe_scrambler_spawn_system = {
            spawn_system = {
                min_distance >= 40
                max_distance <= 60
                max_jumps = 5
                initializer = "scfe_hotumai"
            }
            if = {
                limit = { last_created_system = { NOT = { has_hyperlane_to = prev } } }
                add_hyperlane = {
                    from = this
                    to = last_created_system
                }
            }
            else = {
                add_extra_hyperlane_to_spawned_system_effect = yes
            }
        }
        set_spawn_system_batch = end
    }
    after = {
        country_event = { id = scfe_scrambler.3 days = 5 }
    }
}
country_event = {
    id = scfe_scrambler.3
    title = scfe_scrambler.3.name
    desc = scfe_scrambler.3.desc
    picture = GFX_evt_genetic_modification
    is_triggered_only = yes
    event_chain = scfe_scrambler_chain

    option = {
        name = INTERESTING
        add_monthly_resource_mult = {
            resource = society_research
            value = @tier1researchreward
            min = @tier1researchmin
            max = @tier1researchmax
        }
    }
}
country_event = {
    id = scfe_scrambler.4
    title = scfe_scrambler.4.name
    desc = scfe_scrambler.4.desc
    inline_script = {
        script = events/biogenesis_event_art
        OWNER = this
        REGULAR_PICTURE = GFX_evt_ship_in_orbit_3
        BIOSHIP_PICTURE = GFX_evt_bio_ships_orbiting
    }
    is_triggered_only = yes
    event_chain = scfe_scrambler_chain
    location = event_target:scfe_scrambler_colony2

    option = {
        name = CURIOUS
        if = {
            limit = { scfe_is_heavy_metal = no }
            event_target:scfe_scrambler_colony2 = {
                create_archaeological_site = scfe_scrambler_colony2_dig
            }
        }
    }
}
country_event = {
    id = scfe_scrambler.5
    is_triggered_only = yes
    hide_window = yes

    immediate = {
        random_system_within_border = {
            limit = { scfe_is_valid_star_system = yes }
            save_event_target_as = scfe_scrambler_spawn_system
        }
        set_spawn_system_batch = begin
        event_target:scfe_scrambler_spawn_system = {
            spawn_system = {
                min_distance >= 40
                max_distance <= 60
                max_jumps = 5
                initializer = "scfe_kraat"
            }
            if = {
                limit = { last_created_system = { NOT = { has_hyperlane_to = prev } } }
                add_hyperlane = {
                    from = this
                    to = last_created_system
                }
            }
            else = {
                add_extra_hyperlane_to_spawned_system_effect = yes
            }
        }
        set_spawn_system_batch = end
    }
    after = {
        if = {
            limit = { scfe_is_heavy_metal = no }
            country_event = { id = scfe_scrambler.6 days = 5 }
        }
        else = {
            country_event = { id = scfe_scrambler.2 }
        }
    }
}
country_event = {
    id = scfe_scrambler.6
    title = scfe_scrambler.6.name
    desc = scfe_scrambler.6.desc
    picture = GFX_evt_genetic_modification
    is_triggered_only = yes
    event_chain = scfe_scrambler_chain

    option = {
        name = INTERESTING
        add_monthly_resource_mult = {
            resource = society_research
            value = @tier2researchreward
            min = @tier2researchmin
            max = @tier2researchmax
        }
    }
}
country_event = {
    id = scfe_scrambler.7
    title = scfe_scrambler.7.name
    desc = scfe_scrambler.7.desc
    inline_script = {
        script = events/biogenesis_event_art
        OWNER = this
        REGULAR_PICTURE = GFX_evt_ship_in_orbit_3
        BIOSHIP_PICTURE = GFX_evt_bio_ships_orbiting
    }
    is_triggered_only = yes
    event_chain = scfe_scrambler_chain
    location = event_target:scrambler_colony3_planet

    option = {
        name = CURIOUS
        event_target:scfe_scrambler_colony3_planet = {
            create_archaeological_site = scfe_scrambler_colony3_dig
        }
    }
}


# Dig Sites
namespace = scfe_scrambler_colony1_dig

fleet_event = {
    id = scfe_scrambler_colony1_dig.1
    title = scfe_shamblers_colony1_dig.1.name
    desc = scfe_scrambler_colony1_dig.1.desc
    picture = GFX_evt_archaeology_camp
    show_sound = event_default
    is_triggered_only = yes
    archaeology = yes
    event_chain = scfe_scrambler_chain

    immediate = {
        from = { set_site_progress_locked = yes }
    }
    after = {
        from = { set_site_progress_locked = no }
    }
    option = {
        name = DIG
    }
}
fleet_event = {
    id = scfe_scrambler_colony1_dig.2
    title = scfe_scrambler_colony1_dig.2.name
    desc = scfe_scrambler_colony1_dig.2.desc
    picture = GFX_evt_busy_spaceport
    show_sound = event_default
    is_triggered_only = yes
    archaeology = yes
    event_chain = scfe_scrambler_chain

    immediate = {
        from = { set_site_progress_locked = yes }
    }
    after = {
        from = { set_site_progress_locked = no }
    }
    option = {
        name = DIG
    }
}
fleet_event = {
    id = scfe_scrambler_colony1_dig.3
    title = scfe_scrambler_colony1_dig.3.name
    desc = scfe_scrambler_colony1_dig.3.desc
    picture = GFX_evt_ancient_databank
    show_sound = event_default
    is_triggered_only = yes
    archaeology = yes
    event_chain = scfe_shamblers_chain

    immediate = {
        from = { set_site_progress_locked = yes }
    }
    after = {
        from = { set_site_progress_locked = no }
    }
    option = {
        name = DIG
    }
}
fleet_event = {
    id = scfe_scrambler_colony1_dig.4
    title = scfe_scrambler_colony1_dig.4.name
    desc = scfe_scrambler_colony1_dig.4.desc
    picture = GFX_evt_star_chart
    show_sound = event_default
    is_triggered_only = yes
    archaeology = yes
    event_chain = scfe_scrambler_chain

    immediate = {
        from = { set_site_progress_locked = yes }
    }
    after = {
        from = { set_site_progress_locked = no }
        if = {
            limit = { owner = { has_policy_flag = scfe_archaeology_cleanup_active } }
            destroy_archaeological_site = from
        }
    }
    option = {
        name = CURIOUS
        hidden_effect = {
            owner = {
                country_event = { id = scfe_scrambler.2 }
            }
        }
    }
}

namespace = scfe_scrambler_colony2_dig

fleet_event = {
    id = scfe_scrambler_colony2_dig.1
    title = scfe_shamblers_colony2_dig.1.name
    desc = scfe_scrambler_colony2_dig.1.desc
    picture = GFX_evt_archaeological_dig
    show_sound = event_default
    is_triggered_only = yes
    archaeology = yes
    event_chain = scfe_scrambler_chain

    immediate = {
        from = { set_site_progress_locked = yes }
    }
    after = {
        from = { set_site_progress_locked = no }
    }
    option = {
        name = DIG
    }
}
fleet_event = {
    id = scfe_scrambler_colony2_dig.2
    title = scfe_scrambler_colony2_dig.2.name
    desc = scfe_scrambler_colony2_dig.2.desc
    picture = GFX_evt_busy_spaceport
    show_sound = event_default
    is_triggered_only = yes
    archaeology = yes
    event_chain = scfe_scrambler_chain

    immediate = {
        from = { set_site_progress_locked = yes }
    }
    after = {
        from = { set_site_progress_locked = no }
    }
    option = {
        name = DIG
    }
}
fleet_event = {
    id = scfe_scrambler_colony2_dig.3
    title = scfe_scrambler_colony2_dig.3.name
    desc = scfe_scrambler_colony2_dig.3.desc
    picture = GFX_evt_star_chart
    show_sound = event_default
    is_triggered_only = yes
    archaeology = yes
    event_chain = scfe_scrambler_chain

    immediate = {
        from = { set_site_progress_locked = yes }
    }
    after = {
        from = { set_site_progress_locked = no }
    }
    option = {
        name = DIG
    }
}
fleet_event = {
    id = scfe_scrambler_colony2_dig.4
    title = scfe_scrambler_colony2_dig.4.name
    desc = scfe_scrambler_colony2_dig.4.desc
    picture = GFX_evt_scanning_remains
    show_sound = event_default
    is_triggered_only = yes
    archaeology = yes
    event_chain = scfe_scrambler_chain

    immediate = {
        from = { set_site_progress_locked = yes }
    }
    after = {
        from = { set_site_progress_locked = no }
        if = {
            limit = { owner = { has_policy_flag = scfe_archaeology_cleanup_active } }
            destroy_archaeological_site = from
        }
    }
    option = {
        name = CURIOUS
        hidden_effect = {
            owner = {
                country_event = { id = scfe_scrambler.5 }
            }
        }
    }
}

namespace = scfe_scrambler_colony3_dig

fleet_event = {
    id = scfe_scrambler_colony3_dig.1
    title = scfe_shamblers_colony3_dig.1.name
    desc = scfe_scrambler_colony3_dig.1.desc
    picture = GFX_evt_archaeological_dig
    show_sound = event_default
    is_triggered_only = yes
    archaeology = yes
    event_chain = scfe_scrambler_chain

    immediate = {
        from = { set_site_progress_locked = yes }
    }
    after = {
        from = { set_site_progress_locked = no }
    }
    option = {
        name = DIG
    }
}
fleet_event = {
    id = scfe_scrambler_colony3_dig.2
    title = scfe_scrambler_colony3_dig.2.name
    desc = scfe_scrambler_colony3_dig.2.desc
    picture = GFX_evt_archaeological_dig
    show_sound = event_default
    is_triggered_only = yes
    archaeology = yes
    event_chain = scfe_scrambler_chain

    immediate = {
        from = { set_site_progress_locked = yes }
    }
    after = {
        from = { set_site_progress_locked = no }
    }
    option = {
        name = DIG
    }
}
fleet_event = {
    id = scfe_scrambler_colony3_dig.3
    title = scfe_scrambler_colony3_dig.3.name
    desc = scfe_scrambler_colony3_dig.3.desc
    picture = GFX_evt_archaeological_dig
    show_sound = event_default
    is_triggered_only = yes
    archaeology = yes
    event_chain = scfe_scrambler_chain

    immediate = {
        from = { set_site_progress_locked = yes }
    }
    after = {
        from = { set_site_progress_locked = no }
    }
    option = {
        name = DIG
    }
}
fleet_event = {
    id = scfe_scrambler_colony3_dig.4
    title = scfe_scrambler_colony3_dig.4.name
    desc = scfe_scrambler_colony3_dig.4.desc
    picture = GFX_evt_archaeological_dig
    show_sound = event_default
    is_triggered_only = yes
    archaeology = yes
    event_chain = scfe_scrambler_chain

    immediate = {
        from = { set_site_progress_locked = yes }
    }
    after = {
        from = { set_site_progress_locked = no }
    }
    option = {
        name = FASCINATING
    }
}
