#

###############################################################################
#
# Precursor Introduction Events for the additional precursor ascension perk
#
###############################################################################

namespace = MAP_precursor_events

# Plexi Introduction
country_event = {
	id = MAP_precursor_events.3
	title = "MAP_precursor_events.3.name"
	desc = "MAP_precursor_events.3.desc"
	picture = GFX_evt_crashed_station
	show_sound = event_default
	location = event_target:MAP_plexi_digsite

	fire_only_once = yes

	is_triggered_only = yes

	trigger = {
		has_MAP_active = yes
		is_ai = no
		NOT = { has_global_flag = plexi_started }
	}

	immediate = {
		AAA_MAP_Precursor_Selection_Effect = { FLAG = precursor_plexi_1 }
		set_global_flag = plexi_started
		set_country_flag = plexi_intro
		random_system_within_border = {
			limit = {
				NOT = {
					has_star_flag = sol_system
				}
				has_star_flag = precursor_plexi_1
				any_system_planet = {
					has_anomaly = no
					NOT = { exists = archaeological_site }
					NOT = { has_planet_flag = suppress_archaeological_sites }
					is_star = no
					NOR = {
						is_planet_class = pc_gas_giant
						is_planet_class = pc_molten
						is_planet_class = pc_toxic
					}
				}
			}
			set_star_flag = first_plexi_site@root
			random_system_planet = {
				limit = {
					has_anomaly = no
					NOT = { exists = archaeological_site }
					NOT = { has_planet_flag = suppress_archaeological_sites }
					is_star = no
					NOR = {
						is_planet_class = pc_gas_giant
						is_planet_class = pc_molten
						is_planet_class = pc_toxic
					}
				}
				save_event_target_as = MAP_plexi_digsite
				prevent_anomaly = yes
			}
		}
	}

	option = {
		name = CURIOUS
		event_target:MAP_plexi_digsite = {
			hidden_effect = {
				prev = { country_event = { id = story.5 days = 30 } }
				create_archaeological_site = plexi_digsite_1
			}
		}
	}
}

# Lartia Introduction
country_event = {
	id = MAP_precursor_events.4
	title = "MAP_precursor_events.4.name"
	desc = "MAP_precursor_events.4.desc"
	picture = GFX_evt_crashed_station
	show_sound = event_default
	location = from

	fire_only_once = yes

	is_triggered_only = yes

	trigger = {
		has_MAP_active = yes
		is_ai = no
		NOT = { has_global_flag = lartia_started }
	}
	
	immediate = {
		AAA_MAP_Precursor_Selection_Effect = { FLAG = precursor_lartia_1 }
		set_global_flag = lartia_started
		set_country_flag = lartia_intro
		random_system_within_border = {
			limit = {
				NOT = {
					has_star_flag = sol_system
				}
				has_star_flag = precursor_lartia_1
				any_system_planet = {
					has_anomaly = no
					NOT = { exists = archaeological_site }
					NOT = { has_planet_flag = suppress_archaeological_sites }
					is_star = no
					NOR = {
						is_planet_class = pc_gas_giant
						is_planet_class = pc_molten
						is_planet_class = pc_toxic
						is_planet_class = pc_shattered
					}
				}
			}
			set_star_flag = first_lartia_site@root
			random_system_planet = {
				limit = {
					has_anomaly = no
					NOT = { exists = archaeological_site }
					NOT = { has_planet_flag = suppress_archaeological_sites }
					is_star = no
					NOR = {
						is_planet_class = pc_gas_giant
						is_planet_class = pc_molten
						is_planet_class = pc_toxic
						is_planet_class = pc_shattered
					}
				}
				save_event_target_as = MAP_lartia_digsite
				prevent_anomaly = yes
			}
		}
	}

	option = {
		name = CURIOUS
		event_target:MAP_lartia_digsite = {
			hidden_effect = {
				prev = { country_event = { id = story.5 days = 30 } }
				create_archaeological_site = lartia_digsite_1
			}
		}
	}
}